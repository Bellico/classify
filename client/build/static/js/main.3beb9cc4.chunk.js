(this["webpackJsonpclassify-client"]=this["webpackJsonpclassify-client"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),i=a.n(c),o=a(8),l=a(44),s=a.n(l),u=a(151),m=a(131),d=a(136),f=a(137),p=a(138),v=a(65),h=a.n(v),E=a(67),b=a.n(E),y=a(147),g=a(69),O=a.n(g),j=a(12),C=a(17),x=a.n(C);function k(e,t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(fetch("http://localhost:3001/api/"+e,t));case 2:return a=n.sent,n.next=5,x.a.awrap(a.json());case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}))}function A(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=Object(o.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(),m=Object(o.a)(u,2),d=m[0],f=m[1];return Object(n.useEffect)((function(){!function(){var e;x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d){t.next=8;break}return d.options||(d.options={method:"GET"}),s(!0),t.next=5,x.a.awrap(k(null===d||void 0===d?void 0:d.uri,null===d||void 0===d?void 0:d.options));case 5:e=t.sent,r(e),s(!1);case 8:case"end":return t.stop()}}))}()}),[d]),[a,l,f]}var T=a(26),N=a(22),w=function(){function e(){Object(T.a)(this,e),this.fileTypes=void 0,this.actionType=void 0,this.targetPath=void 0,this.isActive=void 0,this.isWorking=void 0,this.actionType="move",this.isActive=!0,this.isWorking=!1,this.fileTypes=[]}return Object(N.a)(e,[{key:"hasValue",get:function(){return 0!==this.fileTypes.length&&!("move"===this.actionType&&!this.targetPath)}},{key:"canApply",get:function(){return!!this.isActive&&this.hasValue}}]),e}(),S=function(){return localStorage.getItem("pathFolderToClassify")||""},P=function(e){localStorage.setItem("pathFolderToClassify",e)},I=function(){var e=localStorage.getItem("cards");return e?JSON.parse(e).map((function(e){return Object.assign(new w,e)})):[]},R=function(e){localStorage.setItem("cards",JSON.stringify(e))};function V(e){var t=A(),a=Object(o.a)(t,3),r=a[0],c=a[1],i=a[2];return Object(n.useEffect)((function(){e&&i({uri:"checked-path?sourcePath=".concat(e)})}),[e,i]),[r&&r.checked,c]}function D(e){var t=Object(n.useState)(I()),a=Object(o.a)(t,2),r=a[0],c=a[1],i=function(e){var t=Object(n.useState)(),a=Object(o.a)(t,2),r=a[0],c=a[1],i=A(),l=Object(o.a)(i,3),s=l[0],u=l[1],m=l[2];return Object(n.useEffect)((function(){r&&m({uri:"rule",options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:r.actionType,targetPath:r.targetPath,fileTypes:r.fileTypes,sourcePath:e})}})}),[r,e,m]),[s,u,r,c]}(e),l=Object(o.a)(i,4),s=l[0],u=l[1],m=l[2],d=l[3],f=Object(n.useState)([]),p=Object(o.a)(f,2),v=p[0],h=p[1];return Object(n.useEffect)((function(){s&&s.success&&(v.splice(0,1),h(Object(j.a)(v)))}),[s]),Object(n.useEffect)((function(){m&&(m.isWorking=u,m.isActive=u,c(Object(j.a)(r)))}),[m,u]),Object(n.useEffect)((function(){v.length>0?d(v[0]):m&&d(null)}),[v]),[r,c,h]}var W=function(e){var t=e.startWorkingOn,a=Object(n.useState)(S()),c=Object(o.a)(a,2),i=c[0],l=c[1],v=V(i),E=Object(o.a)(v,1)[0],g=Object(y.a)((function(e){l(e)}),200),j=function(){t(i),P(i)};return r.a.createElement("section",{className:"home"},r.a.createElement(m.a,{in:!0},r.a.createElement("div",{className:"container"},r.a.createElement("img",{src:s.a,className:"app-logo",alt:"classify"}),r.a.createElement(u.a,{className:"input-start",defaultValue:i,onChange:function(e){return g(e.target.value)},onKeyUp:function(e){E&&13===e.keyCode&&j()},label:"Dossier \xe0 classer",placeholder:"Chemin complet du dossier source",fullWidth:!0,color:E?"primary":"secondary",InputProps:{endAdornment:r.a.createElement(d.a,{position:"end"},r.a.createElement((function(){return""===i?null:E?r.a.createElement(h.a,{color:"primary"}):r.a.createElement(b.a,{color:"secondary"})}),null))}}),i&&E&&r.a.createElement("div",{className:"start-button"},r.a.createElement(f.a,{in:!0},r.a.createElement(p.a,{onClick:j,variant:"contained",color:"primary",endIcon:r.a.createElement(O.a,null)},"Commencer"))))))},F=a(76),q=a(146),J=a(31),z=function(e){var t=e.startPath,a=e.countFiles,n=e.onBackHome;return r.a.createElement("header",{className:"card header"},r.a.createElement("img",{src:s.a,className:"app-logo",alt:"classify"}),r.a.createElement("div",{className:"path-info"},r.a.createElement(J.a,{variant:"subtitle1"},t),r.a.createElement(J.a,{variant:"subtitle2",color:"primary"},r.a.createElement("strong",null,"(",a," fichier",a>1?"s":"",")"))),r.a.createElement(p.a,{color:"primary",onClick:n},"Retour au choix du dossier"))},B=a(70),L=a.n(B),H=function(e){var t=e.handleAddRule,a=e.handleApplyRules,n=e.countRule;return r.a.createElement("div",{className:"primary-actions"},r.a.createElement(p.a,{onClick:t,className:"button",variant:"contained",color:"default",startIcon:r.a.createElement(L.a,null)},"Ajouter une regle"),n>1&&r.a.createElement(p.a,{onClick:a,className:"button",variant:"contained",color:"primary"},"Appliquer les ",n," regles"))},G=a(152),K=a(134),U=a(148),M=a(154),Q=a(139),X=a(155),Y=a(140),Z=a(150),$=a(156),_=a(141),ee=a(71),te=a.n(ee),ae=a(73),ne=a.n(ae),re=a(103),ce=a(72),ie=a.n(ce),oe=function(e){var t=e.fileTypeList,a=e.card,n=e.onSaveChanges,c=e.onDelete,i=e.applyRule,l=V(""+a.targetPath),s=Object(o.a)(l,1)[0],m=function(e){var t=e.target,r=t.name,c=t.value;a[r]=c,n()},d=Object(y.a)((function(e){m({target:e})}),300);return r.a.createElement("article",null,r.a.createElement("div",{className:"card ".concat(a.isActive?"":"disabled")},r.a.createElement("div",{className:"card-container"},r.a.createElement(G.a,{color:"default",edge:"start",name:"isActive",onChange:function(e){var t=e.target,r=t.name,c=t.checked;a[r]=c,n()},checked:a.isActive})),r.a.createElement("div",{className:"card-container"},r.a.createElement("div",{className:"card-content"},r.a.createElement(J.a,{color:"textSecondary",className:"label-select"},"Type(s) de fichier : "),r.a.createElement(K.a,{variant:"standard"},r.a.createElement(U.a,{disabled:!a.isActive,multiple:!0,name:"fileTypes",renderValue:function(e){return e.join(", ")},onChange:function(e){a.fileTypes=e.target.value,n()},value:a.fileTypes},t.map((function(e){return r.a.createElement(M.a,{key:e,value:e},r.a.createElement(G.a,{checked:a.fileTypes.indexOf(e)>-1}),r.a.createElement(Q.a,{primary:e}))}))))),r.a.createElement("div",{className:"card-content"},r.a.createElement(X.a,{onChange:m,value:a.actionType,name:"actionType",style:{flexDirection:"row"}},r.a.createElement(Y.a,{disabled:!a.isActive,value:"move",control:r.a.createElement(Z.a,{color:"primary"}),label:"D\xe9placer vers"}),r.a.createElement(Y.a,{disabled:!a.isActive,value:"deleted",control:r.a.createElement(Z.a,{color:"primary"}),label:"Supprimer"}))),"move"===a.actionType&&r.a.createElement("div",{className:"card-content"},r.a.createElement($.a,{className:"icon-folder"},r.a.createElement(te.a,null)),r.a.createElement(u.a,{name:"targetPath",disabled:!a.isActive,onChange:function(e){return d(e.target)},defaultValue:a.targetPath,fullWidth:!0,label:"Dossier cible",variant:"outlined",InputProps:{endAdornment:a.targetPath&&!s&&r.a.createElement(ie.a,{color:"primary"})}})),r.a.createElement("div",{className:"card-content"},r.a.createElement(p.a,{disabled:!a.canApply,className:"button",variant:"outlined",size:"medium",onClick:function(){return i(a)}},"Appliquer la regle"))),r.a.createElement("div",{className:"card-container"},r.a.createElement(re.a,{edge:"end",onClick:function(){return c(a)}},r.a.createElement(ne.a,null)))),a.isWorking&&r.a.createElement(_.a,{className:"progress-bar"}))},le=a(74),se=a(75),ue=a(77),me=function(){function e(){Object(T.a)(this,e),this.container=void 0,this.resolve=void 0,this.node=void 0,this.container=document.createElement("div"),this.container=document.createElement("div"),this.container.classList.add("dialog-app")}return Object(N.a)(e,[{key:"setDialog",value:function(e){this.node=e}},{key:"confirm",value:function(e){this.close(),this.resolve&&this.resolve(e)}},{key:"close",value:function(){i.a.unmountComponentAtNode(this.container),document.body.removeChild(this.container)}},{key:"render",value:function(e){document.body.appendChild(this.container),i.a.render(e,this.container)}},{key:"show",value:function(){var e=this;return new Promise((function(t){e.resolve=t,e.render(e.node)}))}}]),e}(),de=a(157),fe=a(142),pe=a(143),ve=a(144),he=a(145),Ee=function(e){return r.a.createElement(de.a,{open:!0,onClose:function(){return e.onConfirm({confirm:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(fe.a,{id:"alert-dialog-title"},e.textTitle),r.a.createElement(pe.a,null,r.a.createElement(ve.a,{id:"alert-dialog-description"},e.textContent)),r.a.createElement(he.a,null,r.a.createElement(p.a,{color:"primary",onClick:function(){return e.onConfirm({confirm:!1})}},e.textCancel),r.a.createElement(p.a,{color:"primary",autoFocus:!0,onClick:function(){return e.onConfirm({confirm:!0})}},e.textConfirm)))},be=function(e){function t(e){var a;return Object(T.a)(this,t),(a=Object(le.a)(this,Object(se.a)(t).call(this))).setDialog(r.a.createElement(Ee,{textConfirm:e.textConfirm,textCancel:e.textCancel,textTitle:e.textTitle,textContent:e.textContent,onConfirm:function(e){return a.confirm(e)}})),a}return Object(ue.a)(t,e),t}(me),ye=function(e){var t=e.startPath,a=e.setStartPath,c=function(e){var t=A(),a=Object(o.a)(t,3),r=a[0],c=a[1],i=a[2];return Object(n.useEffect)((function(){e&&i({uri:"extensions?sourcePath=".concat(e)})}),[e,i]),[r,c]}(t),i=Object(o.a)(c,2),l=i[0],s=i[1],u=D(t),m=Object(o.a)(u,3),d=m[0],f=m[1],p=m[2],v=function(){return d.filter((function(e){return e.canApply})).length},h=function(){f(Object(j.a)(d)),R(d)},E=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=function(){var t=d.indexOf(e);d.splice(t,1),f(Object(j.a)(d)),R(d)},e.hasValue){a.next=4;break}return t(),a.abrupt("return");case 4:return a.next=6,x.a.awrap(new be({textTitle:"Suppression de la regle",textContent:"Voulez vous vraiment supprimer cette r\xe8gle?",textCancel:"Annuler",textConfirm:"Supprimer"}).show());case 6:a.sent.confirm&&t();case 8:case"end":return a.stop()}}))},b=function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(new be({textTitle:"Application de la regle de ".concat("move"===e.actionType?"d\xe9placement":"suppression"),textContent:"Voulez vous vraiment appliquer la r\xe8gle de ".concat("move"===e.actionType?"d\xe9placement":"suppression","?"),textCancel:"Annuler",textConfirm:"Appliquer"}).show());case 2:t.sent.confirm&&p([e]);case 4:case"end":return t.stop()}}))};return r.a.createElement("section",{className:"working"},r.a.createElement("div",{className:"container"},s&&r.a.createElement(_.a,null),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{startPath:t,countFiles:l.countFiles,onBackHome:function(){a("")}}),d.map((function(e,t){return r.a.createElement(oe,{key:t,card:e,fileTypeList:l.extensions,onSaveChanges:h,onDelete:E,applyRule:b})})),r.a.createElement(H,{handleAddRule:function(){f([].concat(Object(j.a)(d),[new w]))},handleApplyRules:function(){return x.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.awrap(new be({textTitle:"Application de toute les r\xe8gles",textContent:"Voulez vous vraiment appliquer successivement les ".concat(v()," r\xe8gles ?"),textCancel:"Annuler",textConfirm:"Appliquer (".concat(v(),")")}).show());case 2:e.sent.confirm&&p(d.filter((function(e){return e.canApply})));case 4:case"end":return e.stop()}}))},countRule:v()}))))},ge=(a(101),Object(F.a)({palette:{type:"dark",primary:{main:"#ffa115"}}}));i.a.render(r.a.createElement((function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(q.a,{theme:ge},r.a.createElement("main",{className:"app"},a&&""!==a?r.a.createElement(ye,{startPath:a,setStartPath:c}):r.a.createElement(W,{startWorkingOn:c})))}),null),document.getElementById("root"))},44:function(e,t,a){e.exports=a.p+"static/media/classify.e1ec5b06.svg"},90:function(e,t,a){e.exports=a(102)}},[[90,1,2]]]);
//# sourceMappingURL=main.3beb9cc4.chunk.js.map